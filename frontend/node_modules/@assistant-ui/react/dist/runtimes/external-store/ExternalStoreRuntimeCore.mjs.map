{"version":3,"sources":["../../../src/runtimes/external-store/ExternalStoreRuntimeCore.tsx"],"sourcesContent":["import { BaseAssistantRuntimeCore } from \"../../internal\";\nimport { ExternalStoreThreadListRuntimeCore } from \"./ExternalStoreThreadListRuntimeCore\";\nimport { ExternalStoreAdapter } from \"./ExternalStoreAdapter\";\nimport { ExternalStoreThreadRuntimeCore } from \"./ExternalStoreThreadRuntimeCore\";\n\nconst getThreadListAdapter = (store: ExternalStoreAdapter<any>) => {\n  return {\n    threadId: store.threadId,\n    onSwitchToNewThread: store.onSwitchToNewThread,\n    onSwitchToThread: store.onSwitchToThread,\n    ...store.adapters?.threadList,\n  };\n};\n\nexport class ExternalStoreRuntimeCore extends BaseAssistantRuntimeCore {\n  public readonly threadList;\n\n  private _store: ExternalStoreAdapter<any>;\n\n  constructor(store: ExternalStoreAdapter<any>) {\n    super();\n    this._store = store;\n    this.threadList = new ExternalStoreThreadListRuntimeCore(\n      getThreadListAdapter(store),\n      (threadId) =>\n        new ExternalStoreThreadRuntimeCore(\n          this._proxyConfigProvider,\n          threadId,\n          this._store,\n        ),\n    );\n  }\n\n  public setStore(store: ExternalStoreAdapter<any>) {\n    this._store = store;\n    this.threadList.setAdapter(getThreadListAdapter(store));\n    this.threadList.mainThread.setStore(store);\n  }\n}\n"],"mappings":";AAAA,SAAS,gCAAgC;AACzC,SAAS,0CAA0C;AAEnD,SAAS,sCAAsC;AAE/C,IAAM,uBAAuB,CAAC,UAAqC;AACjE,SAAO;AAAA,IACL,UAAU,MAAM;AAAA,IAChB,qBAAqB,MAAM;AAAA,IAC3B,kBAAkB,MAAM;AAAA,IACxB,GAAG,MAAM,UAAU;AAAA,EACrB;AACF;AAEO,IAAM,2BAAN,cAAuC,yBAAyB;AAAA,EACrD;AAAA,EAER;AAAA,EAER,YAAY,OAAkC;AAC5C,UAAM;AACN,SAAK,SAAS;AACd,SAAK,aAAa,IAAI;AAAA,MACpB,qBAAqB,KAAK;AAAA,MAC1B,CAAC,aACC,IAAI;AAAA,QACF,KAAK;AAAA,QACL;AAAA,QACA,KAAK;AAAA,MACP;AAAA,IACJ;AAAA,EACF;AAAA,EAEO,SAAS,OAAkC;AAChD,SAAK,SAAS;AACd,SAAK,WAAW,WAAW,qBAAqB,KAAK,CAAC;AACtD,SAAK,WAAW,WAAW,SAAS,KAAK;AAAA,EAC3C;AACF;","names":[]}