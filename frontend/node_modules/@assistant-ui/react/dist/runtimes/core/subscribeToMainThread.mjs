// src/runtimes/core/subscribeToMainThread.ts
var subscribeToMainThread = (runtime, callback) => {
  let first = true;
  let cleanup;
  const inner = () => {
    cleanup?.();
    cleanup = runtime.threadList.mainThread.subscribe(callback);
    if (!first) {
      callback();
    }
    first = false;
  };
  const unsubscribe = runtime.threadList.mainThread.subscribe(inner);
  inner();
  return () => {
    unsubscribe();
    cleanup?.();
  };
};
export {
  subscribeToMainThread
};
//# sourceMappingURL=subscribeToMainThread.mjs.map